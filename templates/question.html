<!DOCTYPE html>
<html lang="en">
<head>
    <title>Title</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='bootstrap-iso.css') }}">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
            integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
            integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
            crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
            integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
            crossorigin="anonymous"></script>
</head>
<body>
{% if session["username"] %}
Your a logged in as <a href="/user/{{ user_id }}">{{ session["username"] }}</a>
{% else %}
You are not logged in
{% endif %}
<h1>Question:</h1>
<table border="2" cellpadding="5" cellspacing="" width="1200" style="border-collapse:collapse;">
    <thead id="question">
    <tr>
        {% for item in question_headers %}
            <th>{{ item }}</th>
        {% endfor %}
    </tr>
    </thead>
    <tbody>
    {% if questions %}
        {% for question in questions %}
            {% if quest_id == question.id %}
                <tr>
                    {% for key, value in question.items() %}
                        {% if key != 'id' and key != 'image' and key != 'user_id' %}
                            <td align="center">{{ value }}</td>
                        {% endif %}
                    {% endfor %}
                </tr>
                </tbody>
                </table>
                <br>
                <form action="/question/{{ question.id }}/new-answer"><span style="float:left;">
        <button type="submit"
                style="margin: 10px; width:130px; height:25px"><strong>Add new answer</strong></button></span>
                </form>
                <form action="/question/{{ question.id }}/new-comment"><span style="float:left;">
        <button type="submit"
                style="margin:10px; width:190px; height:25px"><strong>Post Comment to Question</strong></button></span>
                </form>
                <form action="/question/{{ question.id }}/edit"><span style="float:left;">
        <button type="submit"
                style="margin:10px; width:130px; height:25px"><strong>Edit Question</strong></button></span>
                </form>
                <form action="/question/{{ question.id }}/delete" method="post"><span style="float:left;">
        <button type="submit"
                style="margin:10px; width:130px; height:25px"><strong>Delete Question</strong></button></span>
                </form>
                <div class="bootstrap-iso">
                    <button type="button" data-toggle="collapse"
                            data-target="#multiCollapseExamplequestion"
                            aria-expanded="false" aria-controls="multiCollapseExamplequestion"
                            style="margin:10px; width:130px; height:25px"><strong>
                        See Comments
                    </strong></button>
                    <div class="collapse" id="multiCollapseExamplequestion">
                        <div class="card card-body">
                            {% if is_comment %}
                                <h3>Comments for this question: </h3>
                                <br>
                                <table border="2" cellpadding="5" cellspacing="" width="800"
                                       style="border-collapse:collapse;">
                                    <thead>
                                    <tr>
                                        {% for item in comment_headers %}
                                            <th>{{ item }}</th>
                                        {% endfor %}
                                    </tr>
                                    </thead>
                                {% for comment in comments %}
                                    <tbody>
                                        {% if not comment.answer_id %}
                                            {% if quest_id == comment.question_id %}
                                                <tr>
                                                    {% for key, value in comment.items() %}
                                                        {% if key == 'submission_time' or key == 'message' %}
                                                            <td align="center">{{ value }}</td>
                                                        {% endif %}
                                                    {% endfor %}
                                                    <td>
                                                        <form action='/comments/{{ comment.id }}/edit' align="center"
                                                              method="get">
                                                            <button type="submit" style="width:80px; height:25px">
                                                                <strong>Edit</strong>
                                                            </button>
                                                        </form>
                                                    </td>
                                                    <td>
                                                        <form action="/comments/{{ comment.id }}/delete" align="center"
                                                              method="post">
                                                            <input type="hidden" value="{{ comment.question_id }}"
                                                                   name="question_id">
                                                            <button type="submit" style="width:80px; height:25px">
                                                                <strong>Delete</strong>
                                                            </button>
                                                        </form>
                                                    </td>
                                                </tr>
                                            {% endif %}
                                        {% endif %}
                                    {% endfor %}
                                    {% else %}
                                <h3>There are no comments for this question...bruh...</h3>
                            {% endif %}
                                    </tbody>
                                </table>
                        </div>
                    </div>
                </div>
            {% endif %}
        {% endfor %}
        <br>
    {% endif %}
<br>
{% if is_answer %}
    <h1>Answers:</h1>
    <table border="2" cellpadding="5" cellspacing="" width="1200" style="border-collapse:collapse;">
        <thead>
        <tr>
            {% for item in answer_headers %}
                <th>{{ item }}</th>
            {% endfor %}
        </tr>
        </thead>
        <tbody>
        <tr>
            {% if all_answer %}
                {% for answer in all_answer %}
                    {% if quest_id == answer.question_id %}
                        {% if answer.accepted != False %}
                        <tr>
                            {% for key, value in answer.items() %}
                                {% if key != 'id' and key != 'image' and key != 'question_id' and key != 'bool' and key != 'user_id' %}
                                    <td align="center">{{ value }}</td>
                                {% endif %}
                            {% endfor %}
                            <td>
                                <form action="/answer/{{ answer.id }}/edit" align="center"
                                      method="get">
                                    <button type="submit" style="width:80px; height:25px">
                                        <strong>Edit</strong>
                                    </button>
                                </form>
                            </td>
                            <td>
                                <form action="/answer/{{ answer.id }}/delete" align="center" method="post">
                                    <button type="submit" style="width:80px; height:25px"><strong>Delete</strong>
                                    </button>
                                </form>
                            </td>
                            <td>
                                <form action="/answer/{{ answer.id }}/new-comment" align="center"
                                      method="get">
                                    <button type="submit" style="width:120px; height:25px">
                                        <strong>Post Comment</strong>
                                    </button>
                                </form>
                            </td>
                            <td>
                                <div id="button" class="bootstrap-iso">
                                    <button type="button" align="center" data-toggle="collapse"
                                            data-target="#multiCollapseExample{{ answer.id }}"
                                            aria-expanded="false" aria-controls="multiCollapseExample{{ answer.id }}"
                                            style="margin:10px; width:110px; height:25px"><strong>
                                        See Comments
                                    </strong></button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="7" align="center">
                                <div class="bootstrap-iso">
                                    <div class="collapse" id="multiCollapseExample{{ answer.id }}">
                                        <div class="card card-body">
                                        {% if answer.bool == True %}
                                            <h5><strong>Comments for this answer: </strong></h5>
                                            <br>
                                            <table border="2" cellpadding="5" cellspacing="" width="800"
                                                   style="border-collapse:collapse;">
                                                <thead>
                                                <tr>
                                                    {% for item in comment_headers %}
                                                        <th>{{ item }}</th>
                                                    {% endfor %}
                                                </tr>
                                                </thead>
                                                <tbody>
                                                {% for comment in comments %}
                                                    {% if answer.id == comment.answer_id %}
                                                        <tr>
                                                            {% for key, value in comment.items() %}
                                                                {% if key == 'submission_time' or key == 'message' %}
                                                                    <td align="center">{{ value }}</td>
                                                                {% endif %}
                                                            {% endfor %}
                                                            <td>
                                                                <form action='/comments/{{ comment.id }}/edit'
                                                                      align="center"
                                                                      method="get">
                                                                    <button type="submit"
                                                                            style="width:80px; height:25px">
                                                                        <strong>Edit</strong>
                                                                    </button>
                                                                </form>
                                                            </td>
                                                            <td>
                                                                <form action="/comments/{{ comment.id }}/delete"
                                                                      align="center" method="post">
                                                                    <input type="hidden"
                                                                           value="{{ answer.question_id }}"
                                                                           name="question_id">
                                                                    <button type="submit"
                                                                            style="width:80px; height:25px">
                                                                        <strong>Delete</strong>
                                                                    </button>
                                                                </form>
                                                            </td>
                                                        </tr>
                                                    {% endif %}
                                                {% endfor %}
                                                </tbody>
                                            </table>
                                            {% else %}
                                            <br>
                                            <h3>There are no comments for this answer...bruh...</h3>
                                            <br>
                                            {% endif %}
                                            <br><br>
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        {% endif %}
                    {% endif %}
                {% endfor %}
            {% endif %}
        </tbody>
    </table>
{% else %}
    <h1>Answers: </h1>
    <h2>There are no answers to this question yet.</h2>
{% endif %}
<br><br>
<form action="/">
    <button type="submit" style="width:180px; height:25px"><strong>Go back to homepage</strong></button>
</form>
<br>
</body>
</html>